<!DOCTYPE html>
<html >
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>欢迎页</title>
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <!-- <link rel="stylesheet" href="css/bootstrap.min.css">-->
    <link rel="stylesheet" href="css/layui.css"  media="all">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <title>百度ECHarts</title>
    <meta name="keywords" content="">
    <meta name="description" content="">
    <link href="/css/components.min.css" rel="stylesheet" id="style_components" type="text/css" />
    <link rel="shortcut icon" href="favicon.ico"> <link href="/css/bootstrap.min.css?v=3.3.6" rel="stylesheet">
    <link href="/css/font-awesome.css?v=4.4.0" rel="stylesheet">

    <link href="/css/animate.css" rel="stylesheet">
    <link href="/css/style.css?v=4.1.0" rel="stylesheet">
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=IDvNBsejl9oqMbPF316iKsXR"></script>
    <script type="text/javascript" src="http://api.map.baidu.com/library/SearchInfoWindow/1.5/src/SearchInfoWindow_min.js"></script>
    <link rel="stylesheet" href="http://api.map.baidu.com/library/SearchInfoWindow/1.5/src/SearchInfoWindow_min.css" />
    <style type="text/css">

    </style>
</head>
<body class="gray-bg">

<div class="wrapper wrapper-content animated fadeInRight">
    <div class="row"style="height: auto">

        <div style="float: left;width: 75%" >
            <div class="ibox float-e-margins">
                <!-- <div class="ibox-title">
                     <h5>巡检网点</h5>

                 </div>-->
                <div class="ibox-content">
                    <fieldset class="demo_content">
                        <div style="min-height: 950px; width: 100%;" id="map">
                        </div>

                    </fieldset>
                </div>
            </div>
        </div>


        <div class="row"style="float: right;width: 25%;margin-right: 3px">
            <div class="portlet box blue">
                <div class="portlet-title">
                    <div class="caption"style="font-size: 16px">设备状态信息（实时） </div>
                </div>
                <div class="portlet-body">
                    <div class="table-scrollable">
                        <table class="table table-bordered table-hover"id="1">
                            <thead>
                            <tr>
                                <th > 设备 </th>
                                <th> 入库</th>
                                <th> 出库 </th>
                                <th> 库存 </th>
                                <th> 报修 </th>
                                <th> 报废 </th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr class="active">
                                <td > 打印机 </td>
                                <td> 4</td>
                                <td> 2 </td>
                                <td> 4 </td>
                                <td> 1 </td>
                                <td>4 </td>
                            </tr>
                            <tr class="success">
                                <td > 业务终端 </td>
                                <td> 2 </td>
                                <td> 3 </td>
                                <td> 3 </td>
                                <td> 0 </td>
                                <td> 1 </td>
                            </tr>
                            <tr class="warning">
                                <td > 指纹仪 </td>
                                <td> 5 </td>
                                <td> 3 </td>
                                <td> 5 </td>
                                <td> 8 </td>
                                <td> 1 </td>
                            </tr>
                            <tr class="danger">
                                <td > 发电机 </td>
                                <td> 6 </td>
                                <td> 4 </td>
                                <td> 3 </td>
                                <td> 6 </td>
                                <td> 0 </td>
                            </tr>
                            <tr class="active">
                                <td > 读卡器 </td>
                                <td> 4 </td>
                                <td> 2 </td>
                                <td> 7 </td>
                                <td> 3 </td>
                                <td>4 </td>
                            </tr>
                            <tr class="success">
                                <td > 密码键盘 </td>
                                <td> 4 </td>
                                <td> 1 </td>
                                <td> 7 </td>
                                <td> 0 </td>
                                <td> 1 </td>
                            </tr>
                            <tr class="warning">
                                <td > UPS机头 </td>
                                <td> 2 </td>
                                <td> 4 </td>
                                <td> 3 </td>
                                <td> 4 </td>
                                <td> 1 </td>
                            </tr>
                            <tr class="danger">
                                <td > 防雷 </td>
                                <td> 1 </td>
                                <td> 2 </td>
                                <td> 5 </td>
                                <td> 1 </td>
                                <td> 0 </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="ibox float-e-margins">
                <div class="portlet light bordered">
                    <div class="portlet-title">
                        <div class="caption">
                            <span class="caption-subject font-green bold uppercase">丰宁县巡检信息</span>
                        </div>
                        <div class="tools">
                            <span class=" font-green bold uppercase" onclick="more()">更多</span><i class="fa fa-angle-double-right"></i>
                        </div>
                    </div>
                    <div class="portlet-body">
                        <div class="table-scrollable">
                            <table class="table table-hover">
                                <thead>
                                <tr>
                                    <th align="center"> 网点 </th>
                                    <th align="center"> 计划巡检时间 </th>
                                    <th align="center"> 状态 </th>


                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td> 大滩支行 </td>
                                    <td> 2018-05-06 </td>
                                    <td> <span class="label label-sm label-danger"> 待巡检 </span> </td>


                                </tr>
                                <tr>
                                    <td> 土城子支行 </td>
                                    <td> 2018-05-08 </td>
                                    <td><span class="label label-sm label-danger"> 待巡检 </span> </td>


                                </tr>
                                <tr>
                                    <td> 四岔口支行 </td>
                                    <td> 2018-05-10 </td>
                                    <td> <span class="label label-sm label-danger"> 待巡检 </span> </td>
                                </tr>
                                <tr>
                                    <td> 石人沟支行 </td>
                                    <td> 2018-05-12 </td>
                                    <td> <span class="label label-sm label-danger"> 待巡检 </span> </td>
                                     </tr>
                                <tr>
                                    <td> 白塔支行 </td>
                                    <td> 2018-05-13 </td>
                                    <td> <span class="label label-sm label-danger"> 待巡检 </span> </td>
                                       </tr>
                                <tr>
                                    <td> 窄岭支行 </td>
                                    <td> 2018-01-15 </td>
                                    <td> <span class="label label-sm label-info"> 已完成 </span> </td>
                                </tr>
                                <tr>
                                    <td> 鱼儿山支行 </td>
                                    <td> 2018-01-18 </td>
                                    <td> <span class="label label-sm label-info"> 已完成 </span> </td>
                                </tr>
                                <tr>
                                    <td> 汤河支行 </td>
                                    <td> 2018-01-19 </td>
                                    <td> <span class="label label-sm label-info"> 已完成 </span> </td>
                                </tr>
                                <tr>
                                    <td> 凤山支行 </td>
                                    <td> 2018-02-19 </td>
                                    <td> <span class="label label-sm label-info"> 已完成 </span> </td>
                                </tr>
                                <tr>
                                    <td> 刘营支行 </td>
                                    <td> 2018-02-20 </td>
                                    <td> <span class="label label-sm label-info"> 已完成 </span> </td>
                                     </tr>
                                <tr>
                                    <td> 波罗诺支行 </td>
                                    <td> 2018-03-21 </td>
                                    <td>  <span class="label label-sm label-info"> 已完成 </span> </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</div>

<!-- 全局js -->
<script src="/js/jquery.min.js?v=2.1.4"></script>
<script src="/js/bootstrap.min.js?v=3.3.6"></script>
<script src="/js/layui.js?v=3.3.6"></script>


<!-- 自定义js -->
<script src="/js/content.js?v=1.0.0"></script>
<script src="/js/appjs/sys/echarts1.js"></script>


<script type="text/javascript">
    var markerArr = [
        { title: "网点：大滩支行", point: "116.023256,41.586461", address: "承德市丰宁县大滩", tel: "2018-03-29",plan:"2018-07-22"},
        { title: "网点：土城子支行", point: "116.618734,41.322407", address: "承德市丰宁县", tel: "2018-03-29",plan:"2018-07-22"},
        { title: "网点：四岔口支行", point: "116.422807,41.676334", address: "承德市丰宁县四岔口", tel: "2018-04-10",plan:"2018-05-025" },
        { title: "网点：丰宁支行", point: "116.885809,41.399098", address: "承德市丰宁县", tel: "2018-01-12" ,plan:"2018-05-06"},
        { title: "网点：白塔支行", point: "116.626859,41.244767", address: "承德市丰宁县白塔", tel: "2018-03-30" ,plan:"2018-06-07"},
        { title: "网点：外沟门支行", point: "116.565054,41.888101", address: "承德市丰宁县外沟门", tel: "2018-03-29",plan:"2018-07-22"},
        { title: "网点：汤河支行", point: "116.522841,41.108465", address: "承德市丰宁县汤河", tel: "2018-03-12" ,plan:"2018-05-06"}
    ];

    function map_init() {
        var map = new BMap.Map("map"); // 创建Map实例
        var point = new BMap.Point(116.656417,41.222282); //地图中心点，丰宁县
        map.centerAndZoom(point, 11); // 初始化地图,设置中心点坐标和地图级别。
        map.enableScrollWheelZoom(true); //启用滚轮放大缩小
        //地图、卫星、混合模式切换
        map.addControl(new BMap.MapTypeControl({mapTypes: [BMAP_NORMAL_MAP, BMAP_SATELLITE_MAP, BMAP_HYBRID_MAP]}));
        //向地图中添加缩放控件
        var ctrlNav = new window.BMap.NavigationControl({
            anchor: BMAP_ANCHOR_TOP_LEFT,
            type: BMAP_NAVIGATION_CONTROL_LARGE
        });
        map.addControl(ctrlNav);
        //向地图中添加缩略图控件
        var ctrlOve = new window.BMap.OverviewMapControl({
            anchor: BMAP_ANCHOR_BOTTOM_RIGHT,
            isOpen: 1
        });
        map.addControl(ctrlOve);
        //向地图中添加比例尺控件
        var ctrlSca = new window.BMap.ScaleControl({
            anchor: BMAP_ANCHOR_BOTTOM_LEFT
        });
        map.addControl(ctrlSca);

        var point = new Array(); //存放标注点经纬信息的数组
        var marker = new Array(); //存放标注点对象的数组
        var info = new Array(); //存放提示信息窗口对象的数组
        var infoWindow =new Array();//存放检索信息窗口对象的数组
        var marker1= new Array(); //存放标注点对象的数组

        //alert(markerArr.length);
        for (var i = 0; i < markerArr.length; i++) {

            var iconImg =new BMap.Icon('../../img/img/green.png', new BMap.Size(60, 60), { anchor: new BMap.Size(20, 20) });
            var iconImgred = new BMap.Icon('../../img/img/red.png', new BMap.Size(60, 60), { anchor: new BMap.Size(20, 20) });

            var p0 = markerArr[i].point.split(",")[0]; //
            var p1 = markerArr[i].point.split(",")[1]; //按照原数组的point格式将地图点坐标的经纬度分别提出来
            point[i] = new BMap.Point(p0, p1); //循环生成新的地图点
            if (markerArr[i].address=="承德市丰宁县")
            {
                marker[i] = new BMap.Marker(point[i],{icon:iconImg}); //按照地图点坐标生成标记
            }
            else
            {

                marker[i] = new BMap.Marker(point[i],{icon:iconImgred}); //按照地图点坐标生成标记
            }
            map.addOverlay(marker[i]);

            var label =  new window.BMap.Label(markerArr[i].title, { offset: new window.BMap.Size(20, -10) });

            marker[i].setLabel(label);

            // 创建信息窗口对象
            info[i] = "<p style=’font-size:12px;lineheight:1.8em;’>" + "</br>" + markerArr[i].title+"</br>地址：" + markerArr[i].address +"</br> 最近巡检时间：" +
                    markerArr[i].tel +"</br>计划巡检时间：" + markerArr[i].plan +"</br></p>";
            var EditHtml = [];
            EditHtml.push('<div align="right">');
            EditHtml.push('          <input type="button" name="btnOK" class="className" style="width:90px;height:34px;" onclick="fnOK()" value="查看巡检报告">&nbsp;&nbsp;');

            EditHtml.push('</div>');
            EditHtml.push('<div  class="table-scrollable"><br/>');

            EditHtml.push('<table class="table table-bordered table-hover" style="width: 100px" >');
            EditHtml.push('  <tr>');
            EditHtml.push('      <th align="center" class="common1" ">设备名称</th>');
            EditHtml.push('  <th align="center" class="common1">型号</th>  ');
            EditHtml.push('	     <th align="center" class="common1" ">状态</th>');
            EditHtml.push('	     <th align="center" class="common1"">已使用年限</th>');
            EditHtml.push('  </tr>');
            EditHtml.push('  <tr>');
            EditHtml.push('      <td align="left" class="common ">打印机</td>');
            EditHtml.push('     <td  >HP 1020plus</td>');
            EditHtml.push('	     <td >正常</td>');
            EditHtml.push('	     <td >2年7个月</td>');
            EditHtml.push('  </tr>');
            EditHtml.push('  <tr>');
            EditHtml.push('      <td align="left" class="common1">读卡器</td>');
            EditHtml.push('     <td  >SKRD-EM/W1</td>');
            EditHtml.push('	     <td >正常</td>');
            EditHtml.push('	     <td >3年7个月</td>');
            EditHtml.push('  </tr>');
            EditHtml.push('  <tr>');
            EditHtml.push('      <td align="left" class="common1">业务终端</td>');
            EditHtml.push('     <td  >P35C</td>');
            EditHtml.push('	     <td >正常</td>');
            EditHtml.push('	     <td >5年9个月</td>');
            EditHtml.push('  </tr>');
            EditHtml.push('  <tr>');
            EditHtml.push('      <td align="left" class="common1" >指纹仪</td>');
            EditHtml.push('     <td  >CHD200GIC</td>');
            EditHtml.push('	     <td >正常</td>');
            EditHtml.push('	     <td >5年3个月</td>');
            EditHtml.push('  </tr>');
            EditHtml.push('  <tr>');
            EditHtml.push('      <td align="left" class="common1">发电机</td>');
            EditHtml.push('     <td  >OB3000I5</td>');
            EditHtml.push('	     <td >正常</td>');
            EditHtml.push('	     <td >5年6个月</td>');
            EditHtml.push('  </tr>');
            EditHtml.push('  <tr>');
            EditHtml.push('      <td align="left" class="common1">密码键盘</td>');
            EditHtml.push('     <td  >MAX3420E</td>');
            EditHtml.push('	     <td >正常</td>');
            EditHtml.push('	     <td >5年2个月</td>');
            EditHtml.push('  </tr>');
            EditHtml.push('</table>');
            EditHtml.push('</div>');
            var opts = {
                width : 320,     // 信息窗口宽度
                height: 420,     // 信息窗口高度
                panel  : "panel",         //检索结果面板
                enableAutoPan : true,     //自动平移
                title : info[i]  // 信息窗口标题
            }
            infoWindow[i]= new BMap.InfoWindow( EditHtml.join(""), opts);  // 创建信息窗口对象
            //添加点击事件
            marker[i].addEventListener("click",
                    (function(k){
                        // js 闭包
                        return function(){
                            map.openInfoWindow(infoWindow[k], point[k]);      // 打开信息窗口
                        }
                    })(i)
            );
        }
    }
    //异步调用百度js
    function map_load() {
        var load = document.createElement("script");
        load.src = "http://api.map.baidu.com/api?v=2.0&ak=i0pSF5a29dpE3H33wN6E3jmC&callback=map_init";
        document.body.appendChild(load);
    }
    window.onload = map_load;
    //查看巡检报告
    function fnOK() {
        window.open ("/inspection/plan/maininfo", "newwindow", "height=500, width=800, top=200, left=500, toolbar=no, menubar=no, scrollbars=no, resizable=no,location=no, status=no")

    }
    function more() {
        //window.location.href='/inspection/plan';
        window.open ("/inspection/plan", "newwindow", "height=600, width=1200, top=100, left=500, toolbar=no, menubar=no, scrollbars=no, resizable=no,location=no, status=no")

    }
</script>


</body>


</html>